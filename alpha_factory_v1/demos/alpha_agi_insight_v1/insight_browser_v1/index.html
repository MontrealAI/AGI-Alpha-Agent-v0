<!DOCTYPE html>
<meta charset="utf-8" />
<title>α-AGI Insight – in-browser Pareto explorer</title>
<link rel="stylesheet" href="style.css" />

<script src="d3.v7.min.js"></script>
<script>
// tiny linear-congruential RNG for determinism
function lcg(seed){return()=>((seed=Math.imul(1664525,seed)+1013904223)>>>0)/2**32}

function nonDominated(pop){return pop.filter(a=>!pop.some(b=>
 (b.logic>=a.logic && b.feasible>=a.feasible) && (b.logic>a.logic||b.feasible>a.feasible)))}

document.addEventListener('DOMContentLoaded',()=>{
  const qs   = new URLSearchParams(location.search)
  const seed = +qs.get('seed')||42, popN=+qs.get('pop')||80, gens=+qs.get('gen')||60
  const rand = lcg(seed)

  let pop   = Array.from({length:popN},()=>({logic:rand(),feasible:rand()}))
  const svg = d3.select('body').append('svg').attr('viewBox','0 0 500 500')
  const x   = d3.scaleLinear().domain([0,1]).range([40,460]),
        y   = d3.scaleLinear().domain([0,1]).range([460,40])

  const dot = svg.append('g')
  const info= svg.append('text').attr('x',20).attr('y',30).attr('fill','#fff')

  let gen=0
  const step=()=>{
    info.text(`gen ${gen}`)
    dot.selectAll('circle').data(pop)
       .join('circle')
       .attr('cx',d=>x(d.logic)).attr('cy',d=>y(d.feasible))
       .attr('r',3).attr('fill',d=>d.front?'#00afff':'#666')

    if(gen++>=gens)return
    // mutate
    pop=pop.concat(pop.map(d=>({
      logic:Math.min(1,Math.max(0,d.logic   +(rand()-.5)*.12)),
      feasible:Math.min(1,Math.max(0,d.feasible+(rand()-.5)*.12))
    })))
    // select
    pop.forEach(d=>d.front=false)
    nonDominated(pop).forEach(d=>d.front=true)
    pop = nonDominated(pop).concat(d3.shuffle(pop).slice(0,popN-10))
    requestAnimationFrame(step)
  }
  step()
})
</script>
